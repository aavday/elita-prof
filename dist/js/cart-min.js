"use strict";$(document).ready(function(){var e=localStorage.getItem("cartItems"),t=document.querySelector(".cart .loader"),c=document.querySelector(".cart-items"),a=document.querySelector(".cart-icon"),n=document.querySelector("#cart__place-order"),r=document.querySelector("#cart__place-order__items-data");if(e&&"[]"!==e){var o=JSON.parse(e);$.ajax({url:"/ajax/cart/getItemsData.php",type:"POST",data:"items=".concat(e),success:function(e){e=JSON.parse(e);var r="";e.forEach(function(e){r+='\n                        <div class="cart-item p-3 my-3 rounded shadow border-bold-purple-dark d-flex flex-lg-row flex-column justify-content-between align-items-center" id="item-'.concat(e.ID,'">\n                            <div class="d-flex align-items-center flex-sm-row flex-column">\n                                <img src="').concat(e.PREVIEW_PICTURE_SRC,'" alt="').concat(e.NAME,'" class="cart-item__img my-2">\n                                <a href="').concat(e.DETAIL_PAGE_URL,'" class="cart-item__name fw-bold fs-big ms-4 my-2">').concat(e.NAME,'</a>\n                            </div>\n                            <div class="d-flex align-items-center my-2">\n                                <label for="item-').concat(e.ID,'-quantity">Кол-во:</label>\n                                <input type="number" value="').concat(e.QUANTITY,'" class="catalog-item__quantity rounded shadow border-purple-dark mx-2" id="item-').concat(e.ID,'-quantity" title="Задайте нужное количество данного товара и добавьте в корзину" data-itemId="').concat(e.ID,'">\n                            '),null!==e.PROPERTY_PRICE_VALUE&&(r+='<span class="cart-item__price justify-self-end me-4">От <b class="cart-item__price-value">'.concat(e.PROPERTY_PRICE_VALUE,"</b> р.</span>")),r+='<span class="cart-item__delete" data-itemId="'.concat(e.ID,'"></span>\n                            </div>\n                        </div>\n                    ')}),c.innerHTML=r,t.classList.add("d-none"),n.classList.remove("d-none"),i(),document.querySelectorAll(".catalog-item__quantity").forEach(function(e){e.addEventListener("change",function(){var t=e.getAttribute("data-itemId");o.forEach(function(c,a){c.id===t&&(o[a]={id:t,quantity:e.value})}),localStorage.setItem("cartItems",JSON.stringify(o)),i()})}),document.querySelectorAll(".cart-item__delete").forEach(function(e){e.addEventListener("click",function(){var t=e.getAttribute("data-itemId");o.forEach(function(e,c){e.id===t&&o.splice(c,1)}),localStorage.setItem("cartItems",JSON.stringify(o)),l(o.length),i(),0===o.length&&(document.querySelector(".cart__empty-text").classList.remove("d-none"),n.classList.add("d-none"),a.classList.add("d-none")),document.querySelector("#item-".concat(t)).remove()})})},error:function(e,t){console.log(e,t)}});var i=function(){r.value="<br><br>",o.forEach(function(e,t){var c=document.querySelector("#item-".concat(e.id)),a=c.querySelector(".cart-item__name").innerHTML;r.value+="".concat(t+1,". <b>Назв.:</b> ").concat(a,", <b>Кол-во:</b> ").concat(e.quantity);var n=c.querySelector(".cart-item__price");r.value+=n?" <b>Цена за шт.:</b> ".concat(n," <br><br>"):"<br><br>"})},l=function(e){var t=document.querySelector(".cart-icon");e?(t.classList.remove("d-none"),t.querySelector(".cart-icon__amount-of-items").innerHTML=e):t.classList.add("d-none")}}else t.classList.add("d-none"),document.querySelector(".cart__empty-text").classList.remove("d-none")});