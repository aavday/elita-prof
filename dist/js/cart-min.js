"use strict";$(document).ready(function(){var t=localStorage.getItem("elitaProfCartItems"),e=document.querySelector(".cart .loader"),a=document.querySelector(".cart-items"),c=document.querySelector(".cart-icon");t&&"[]"!==t?$.ajax({url:"/ajax/cart/getItemsData.php",type:"POST",data:"items=".concat(t),success:function(n){n=JSON.parse(n);var r="";n.forEach(function(t){r+='\n                        <div class="cart-item p-3 my-3 rounded shadow border-bold-purple-dark d-flex flex-lg-row flex-column justify-content-between align-items-center" id="item-'.concat(t.ID,'">\n                            <div class="d-flex align-items-center flex-sm-row flex-column">\n                                <img src="').concat(t.PREVIEW_PICTURE_SRC,'" alt="').concat(t.NAME,'" class="cart-item__img my-2">\n                                <a href="').concat(t.DETAIL_PAGE_URL,'" class="cart-item__name fw-bold fs-big ms-4 my-2">').concat(t.NAME,'</a>\n                            </div>\n                            <div class="d-flex align-items-center my-2">\n                                <label for="item-').concat(t.ID,'-quantity">Кол-во:</label>\n                                <input type="number" value="').concat(t.QUANTITY,'" class="catalog-item__quantity rounded shadow border-purple-dark mx-2" id="item-').concat(t.ID,'-quantity" title="Задайте нужное количество данного товара и добавьте в корзину" data-itemId="').concat(t.ID,'">\n                            '),null!==t.PROPERTY_PRICE_VALUE&&(r+='<span class="cart-item__price justify-self-end me-4">От <b>'.concat(t.PROPERTY_PRICE_VALUE," р.</b></span>")),r+='<span class="cart-item__delete" data-itemId="'.concat(t.ID,'"></span>\n                            </div>\n                        </div>\n                    ')}),a.innerHTML=r,e.classList.add("d-none"),document.querySelectorAll(".catalog-item__quantity").forEach(function(t){t.addEventListener("change",function(){var e=t.getAttribute("data-itemId");i.forEach(function(a,c){a.id===e&&(i[c]={id:e,quantity:t.value})}),localStorage.setItem("elitaProfCartItems",JSON.stringify(i))})});var o=document.querySelectorAll(".cart-item__delete"),i=JSON.parse(t);o.forEach(function(t){t.addEventListener("click",function(){var a=t.getAttribute("data-itemId");i.forEach(function(t,e){t.id===a&&i.splice(e,1)}),localStorage.setItem("elitaProfCartItems",JSON.stringify(i)),i&&(e.classList.add("d-none"),document.querySelector(".cart__empty-text").classList.remove("d-none"),c.classList.add("d-none")),document.querySelector("#item-".concat(a)).remove()})})},error:function(t,e){console.log(t,e)}}):(e.classList.add("d-none"),document.querySelector(".cart__empty-text").classList.remove("d-none"))});