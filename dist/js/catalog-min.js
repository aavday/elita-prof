"use strict";$(document).ready(function(){var t=JSON.parse(localStorage.getItem("cartItems")),e=document.querySelectorAll(".catalog-item__add-to-cart-btn"),a=document.querySelectorAll(".catalog-item__quantity"),c=document.querySelector(".cart-icon"),i=function(t){t?(c.classList.remove("d-none"),c.querySelector(".cart-icon__amount-of-items").innerHTML=t):c.classList.add("d-none")},n=function(){t=JSON.parse(localStorage.getItem("cartItems")),e.forEach(function(e){var a=e.getAttribute("data-itemId");if(t&&0!==t.length){var c=!1;t.forEach(function(t){t.id===a&&(c=!0)}),c?(e.classList.add("added"),e.setAttribute("title","Нажмите, чтобы убрать товар из корзины"),e.innerHTML='<i class="fa-solid fa-check me-2"></i>В корзине'):(e.classList.remove("added"),e.setAttribute("title","Нажмите, чтобы добавить товар в корзину"),e.innerHTML='<i class="fas fa-cart-arrow-down me-2"></i>В корзину')}else e.classList.remove("added"),e.setAttribute("title","Нажмите, чтобы добавить товар в корзину"),e.innerHTML='<i class="fas fa-cart-arrow-down me-2"></i>В корзину'}),a.forEach(function(e){if(t&&0!==t.length){var a=!1;t.forEach(function(t){e.getAttribute("data-itemId")===t.id&&(e.title="Вы можете изменить количество данного товара и изменения отобразятся в корзине",e.value=t.quantity,a=!0)}),a||(e.title="Задайте нужное количество данного товара и добавьте в корзину",e.value=1)}else e.title="Задайте нужное количество данного товара и добавьте в корзину",e.value=1})};e&&a&&(n(),e.forEach(function(e){var a=e.getAttribute("data-itemId");e.addEventListener("click",function(){if((t=JSON.parse(localStorage.getItem("cartItems")))||(t=[]),e.classList.contains("added"))t.forEach(function(e,c){e.id===a&&(t.splice(c,1),document.querySelector("#item-".concat(a,"-quantity")).value=1)});else{var c=!1;t.forEach(function(t){t.id===a&&(c=!0)}),c||t.push({id:a,quantity:document.querySelector("#item-".concat(a,"-quantity")).value})}localStorage.setItem("cartItems",JSON.stringify(t)),i(t.length),n()})}),a.forEach(function(e){e.addEventListener("change",function(){(t=JSON.parse(localStorage.getItem("cartItems")))||(t=[]);var a=e.getAttribute("data-itemId");document.querySelector('.catalog-item__add-to-cart-btn[data-itemId="'.concat(a,'"]')).classList.contains("added")&&(t.forEach(function(c,i){c.id===a&&(t[i]={id:a,quantity:e.value})}),localStorage.setItem("cartItems",JSON.stringify(t)),i(t.length),n())})}))});